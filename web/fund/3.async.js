(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"+Lt0":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mrSG"),r=a("q1tI"),o=a("yP6+"),l=n.__importDefault(a("q1tI")),s=a("2dk7"),i=a("SLhE");class u extends r.Component{constructor(){super(...arguments),this.xy={x:"date",y:"fundGrowthRate"}}getTooltipFormat(e){return"totalProfitRate*accumulatedProfit"===e?[e,(e,t)=>({name:"\u7d2f\u8ba1\u6536\u76ca\u7387",value:i.roundToFix(100*e,2)+"%"+"(".concat(t,"\u5143)")})]:"profitRate*profit"===e?[e,(e,t)=>({name:"\u6301\u6709\u6536\u76ca",value:i.roundToFix(100*e,2)+"%"+"(".concat(t,"\u5143)")})]:[e,(e,t,a)=>{var n=t?"(".concat(this.props.textMap["dateBuyAmount"]," ").concat(t,")"):"",r=a?"(".concat(this.props.textMap["dateSellAmount"]," ").concat(a,")"):"";return{name:this.props.textMap["fundGrowthRate"],value:i.roundToFix(100*e,2)+"%"+n+r}}]}get scale(){var e=this.props.data.reduce((e,t)=>{return e.push(t.profitRate,t.fundGrowthRate,t.totalProfitRate),e},[]),t={min:Math.min(...e),max:Math.max(...e)};return{profitRate:t,fundGrowthRate:t,totalProfitRate:t}}render(){var e=this.props,t=e.data,a=e.textMap,n=e.commonProp,r=n.chart,u=this.xy,d=u.x,m=u.y,c=this.scale,f=t.length,h=f>0?t[0].origin.fundStrategy.annualizedRate:{fundGrowth:0,totalProfit:0},p={fixedBuy:s.COLOR_NAME.red,buy:s.COLOR_NAME.purple,sell:s.COLOR_NAME.green};return l.default.createElement("div",null,l.default.createElement("h1",{className:"main-title"},"\u57fa\u91d1\u4e1a\u7ee9\u8d70\u52bf"),l.default.createElement("h2",{className:"sub-title"},l.default.createElement("span",null,"\u57fa\u91d1\u6536\u76ca\u7387\uff1a",i.roundToFix(100*t[f-1].fundGrowthRate,2),"%\uff0c\u5e74\u5316\u6536\u76ca\u7387\uff1a",i.roundToFix(100*h.fundGrowth,2),"%")," ",l.default.createElement("br",null),l.default.createElement("span",null,"\u5b9a\u6295\u7d2f\u8ba1\u6536\u76ca\u7387\uff1a",i.roundToFix(100*t[f-1].totalProfitRate,2),"%\uff0c\u5e74\u5316\u6536\u76ca\u7387\uff1a",i.roundToFix(100*h.totalProfit,2),"%")),l.default.createElement(o.Chart,Object.assign({data:t,scale:c},r),l.default.createElement(o.Legend,{name:"txnType",itemFormatter:e=>{return a[e]}}),l.default.createElement(o.Axis,{name:d}),l.default.createElement(o.Axis,{name:"fundGrowthRate"}),l.default.createElement(o.Axis,{name:"profitRate",visible:!1}),l.default.createElement(o.Axis,{name:"totalProfitRate",visible:!1}),l.default.createElement(o.Tooltip,{crosshairs:{type:"y"}}),l.default.createElement(o.Geom,{type:"line",position:"".concat(d,"*").concat(m),size:2,color:s.COLOR_PLATE_16[0],tooltip:this.getTooltipFormat("fundGrowthRate*dateBuyAmount*dateSellAmount")}),l.default.createElement(o.Geom,{type:"line",position:"date*profitRate",size:2,color:s.COLOR_PLATE_16[2],tooltip:this.getTooltipFormat("profitRate*profit")}),l.default.createElement(o.Geom,{type:"line",position:"date*totalProfitRate",size:2,color:s.COLOR_PLATE_16[3],tooltip:this.getTooltipFormat("totalProfitRate*accumulatedProfit")}),l.default.createElement(o.Geom,{type:"point",position:"".concat(d,"*").concat(m),size:4,shape:"circle",color:["txnType",e=>{return p[e]}],opacity:["dateBuyAmount*dateSellAmount",function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];return 0===e&&0===t?0:1}],tooltip:this.getTooltipFormat(m+"*dateBuyAmount"),style:{lineWidth:2,stroke:"#fff"}})))}}t.FundValChart=u},"2dk7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_COLOR="#1890FF",t.COLOR_PLATE_8=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],t.COLOR_NAME={red:t.COLOR_PLATE_8[7],yellow:t.COLOR_PLATE_8[2],green:t.COLOR_PLATE_8[1],blue:t.COLOR_PLATE_8[0],purple:"#985ae1"},t.COLOR_PLATE_16=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],t.COLOR_PLATE_24=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],t.COLOR_PIE=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],t.COLOR_PIE_16=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"]},"6N5B":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mrSG"),r=a("q1tI"),o=a("yP6+"),l=n.__importDefault(a("q1tI"));class s extends r.Component{getTooltipFormat(e){var t=this.props.formatVal,a=this.props.textMap[this.props.y];return[e,(e,n)=>({name:(n||"")+"(".concat(a,")"),value:t?t(e):e})]}render(){var e=this.props,t=e.title,a=e.subTitle,n=e.y,r=e.data,s=e.textMap,i=e.commonProp,u=e.legendProp,d=i.chart;return l.default.createElement("div",null,l.default.createElement("h1",{className:"main-title"},t||s[n]),a?l.default.createElement("h2",{className:"sub-title"},a):"",l.default.createElement(o.Chart,Object.assign({data:r},d,{scale:{date:{type:"timeCat"}}}),l.default.createElement(o.Legend,Object.assign({},u||{})),l.default.createElement(o.Axis,{name:"date"}),l.default.createElement(o.Tooltip,{crosshairs:{type:"y"}}),l.default.createElement(o.Geom,{type:"line",position:"date*"+n,size:2,color:"name",tooltip:this.getTooltipFormat("".concat(n,"*name"))})))}}t.CommonFundLine=s},"7CHm":function(e,t,a){"use strict";var n=a("p0pE"),r=a("qIgq"),o=a("d6i3"),l=a("1l/V");Object.defineProperty(t,"__esModule",{value:!0});var s=a("SLhE"),i=window["getJSONP"];t.getFundData=function(){var e=l(o.mark(function e(t,a){var n,r;return o.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return 1,"","",Array.isArray(a)?(n=(new Date(a[1]).getTime()-new Date(a[0]).getTime())/1e3/60/60/24,s.dateFormat(new Date(a[0])),s.dateFormat(new Date(a[1]))):n=a,r="http://fund.eastmoney.com/pingzhongdata/".concat(t,".js?v=").concat(s.dateFormat(new Date,"yyyyMMddHHmmss")),e.abrupt("return",new Promise(e=>{i(r,e=>{},{onload:()=>{var t=window["Data_netWorthTrend"]||[];if(0===t.length)throw console.error("\u67e5\u8be2\u57fa\u91d1\u51c0\u503c\u5931\u8d25",t),new Error("\u67e5\u8be2\u57fa\u91d1\u51c0\u503c\u5931\u8d25");console.log("hislen",t.length),t=t.slice(-n),console.log("historyVal ",t);var a=t.reverse().reduce((e,t)=>{var a={date:s.dateFormat(t.x,"yyyy-MM-dd"),val:t.y,bonus:t.unitMoney};if(e.all[a.date]=a,a.bonus){var n=a.bonus.toString().match(/\d+.?\d+/);a.bonus=n?Number(n[0]):0,e.bonus[a.date]=a,t.unitMoney.startsWith("\u62c6\u5206")&&(a.isBonusPortion=!0)}return a,e},{bonus:{},all:{}});console.log("formatResult",a),e(a)}})}));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),function(e){e["ShangZheng"]="1.000001"}(t.IndexFund||(t.IndexFund={}));var u=(e,t,a)=>{var n=a.previousDate,r=a.curDate;if(!n)return a.data[r].val;var o=9===t?"dea":"ema".concat(t),l=Number(a.data[n][o]);return(2*e+(t-1)*l)/(t+1)},d=e=>{var t=[];e.reduce((e,a)=>{var n=e.macd*a.macd;return 0===e.macd?(t.push([a]),a):(n<0?t.push([a]):t[t.length-1].push(a),a)}),e[0].macdPosition=0,t.forEach(e=>{var t=Math.max(...e.map(e=>Math.abs(e.macd)));e.forEach(e=>{var a=Math.abs(e.macd)/t;e.macdPosition=s.roundToFix(a)})})};t.calcMACD=(e=>{var t=Object.values(e);return t.forEach((a,n)=>{var r=a;if(!r.ema12&&0!==r.ema12){var o=t[n-1]?t[n-1].date:void 0;r.ema12=u(r.val,12,{previousDate:o,curDate:r.date,data:e}),r.ema26=u(r.val,26,{previousDate:o,curDate:r.date,data:e}),r.diff=r.ema12-r.ema26,r.dea=o?u(r.diff,9,{previousDate:o,curDate:r.date,data:e}):0,r.macd=2*(r.diff-r.dea)}}),d(t),e}),t.txnByMacd=((e,t,a)=>{e[0].index=0;var n=[[e[0]]];e.reduce((e,t,a)=>{t.index=a;var r=e.macd*t.macd;return r<0?n.push([t]):n[n.length-1].push(t),t}),n.forEach(n=>{var r=n[0].macd>0;if((!r||t)&&(r||a)){var o=n.reduce((e,n)=>{var o=e[e.length-1],l=Math.abs(n.macd);return l>=o.maxVal&&(-1!==o.threshold?e.push({maxVal:l,threshold:-1}):o.maxVal=l),r&&l<=o.maxVal*t&&-1===o.threshold&&(o.threshold=n.index),!r&&l<=o.maxVal*a&&-1===o.threshold&&(o.threshold=n.index),e},[{maxVal:0,threshold:-1}]),l=o[o.length-1];-1===l.threshold&&(l.threshold=n[n.length-1].index+1),console.log("\u4e34\u754c\u70b9",o),o.forEach(t=>{var a=t.threshold;e[a]&&(e[a].txnType=r?"sell":"buy")})}})}),t.getIndexFundData=function(){var e=l(o.mark(function e(a){var l,u,d,m,c,f,h,p,g;return o.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(l=a.range.map(e=>s.dateFormat(e)),u=r(l,2),d=u[0],m=u[1],c=JSON.parse(localStorage.getItem(a.code)||"{}"),f=Object.keys(c),h=[f[0],f[f.length-1]],p=h[0],g=h[1],0!==f.length){e.next=9;break}d="19900101",m=s.dateFormat(Date.now()),e.next=15;break;case 9:if(!(new Date(a.range[0])>=new Date(p)&&new Date(a.range[1])<=new Date(g))){e.next=13;break}return e.abrupt("return",c);case 13:new Date(a.range[0])>=new Date(p)&&(d=g),new Date(a.range[1])<=new Date(g)&&(m=p);case 15:return e.abrupt("return",new Promise(e=>{i("//60.push2his.eastmoney.com/api/qt/stock/kline/get?secid=".concat(a.code,"&fields1=f1,f2,f3,f4,f5&fields2=f51,f52,f53,f54,f55,f56,f57&klt=101&fqt=0&beg=").concat(d.replace(/-/g,""),"&end=").concat(m.replace(/-/g,""),"&ut=fa5fd1943c7b386f172d6893dbfba10b"),o=>{console.log("\u6307\u6570\u57fa\u91d1 \u54cd\u5e94",o.data.klines);var l=o.data.klines,i=l.reduce((e,t)=>{var a=t.split(","),n=r(a,3),o=n[0],l=n[2];return e[o]={date:o,val:l},e},{}),u=n({},c,i),d=Object.keys(u).sort((e,t)=>new Date(e).getTime()-new Date(t).getTime());u=d.reduce((e,t)=>{return e[t]=u[t],e},{}),console.log("sorted date",u),t.calcMACD(u),localStorage.setItem(a.code,JSON.stringify(u));var m={},f=new Date(a.range[0]).getTime()-864e6;for(var h in u)h>=s.dateFormat(f)&&h<=s.dateFormat(a.range[1])&&(m[h]=u[h]);e(m)})}));case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.searchIndex=function(){var e=l(o.mark(function e(t){return o.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>{var a="//searchapi.eastmoney.com/api/suggest/get?input=".concat(t,"&type=14&token=D43BF722C8E33BDC906FB84D85E326E8&markettype=&mktnum=&jys=&classify=&securitytype=&count=5&_=").concat(Date.now());i(a,t=>{var a=t.QuotationCodeTable.Data||[];a=a.filter(e=>"Index"===e.Classify);var n=a.map(e=>{return{code:e.Code,name:e.Name,id:e.QuoteID}});e(n)})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t.getFundInfo=function(){var e=l(o.mark(function e(t){return o.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>{var a="https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=10&t=700&IsNeedBaseInfo=0&IsNeedZTInfo=0&key=".concat(t,"&_=").concat(Date.now());i(a,t=>{var a=t.Datas.map(e=>{return{code:e.CODE,name:e.NAME}});e(a)})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},"7R38":function(e,t,a){"use strict";var n=a("d6i3"),r=a("1l/V");Object.defineProperty(t,"__esModule",{value:!0});var o=a("mrSG"),l=o.__importStar(a("q1tI")),s=o.__importDefault(a("qu0K")),i=o.__importDefault(a("PArb")),u=o.__importDefault(a("fyUT")),d=o.__importDefault(a("Sdc0")),m=o.__importDefault(a("2fM7")),c=o.__importDefault(a("BMrR")),f=o.__importDefault(a("kPKH")),h=a("7CHm"),p=o.__importDefault(a("DzJC")),g=m.default.Option;class v extends l.Component{constructor(){var e;super(...arguments),e=this,this.state={searchIndexData:[]},this.handleSearchIndex=p.default(function(){var t=r(n.mark(function t(a){var r;return n.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,h.searchIndex(a);case 3:r=t.sent,e.setState({searchIndexData:r}),t.next=8;break;case 7:e.setState({searchIndexData:[]});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),1e3)}render(){var e=this.state.searchIndexData,t={style:{width:500},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},a=this.props.form,n=a.getFieldDecorator,r=a.getFieldsValue,o=r(),h="fundPercent"===o.sellUnit?100:void 0;return l.default.createElement("section",null,l.default.createElement(i.default,{orientation:"left"},"\u6b62\u76c8\u7b56\u7565 "),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u4e0a\u8bc1\u6307\u6570\u5927\u4e8e"}),n("shCompositeIndex",{initialValue:3e3})(l.default.createElement(u.default,{style:{width:"100%"},min:0,placeholder:"\u5927\u4e8e\u4e0a\u8bc1\u6307\u6570\u7684\u70b9\uff0c\u5219\u5f00\u59cb\u8fdb\u884c\u6b62\u76c8"}))),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u6301\u6709\u4ed3\u4f4d\u5927\u4e8e"}),n("fundPosition",{initialValue:70})(l.default.createElement(u.default,{style:{width:"100%"},formatter:e=>"".concat(e,"%"),parser:e=>e?e.replace("%",""):"",min:0,max:100,placeholder:"\u6301\u4ed3\u5927\u4e8e\u591a\u5c11\u65f6\u5f00\u59cb\u6b62\u76c8"}))),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u6301\u6709\u6536\u76ca\u7387\u5927\u4e8e"}),n("profitRate",{initialValue:5})(l.default.createElement(u.default,{style:{width:"100%"},formatter:e=>"".concat(e,"%"),parser:e=>e?e.replace("%",""):"",min:0,placeholder:"\u5f00\u59cb\u6b62\u76c8\u7684\u6301\u6709\u6536\u76ca\u7387\u6700\u5c0f\u503c"}))),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u662f\u5426\u6536\u76ca\u65b0\u9ad8"}),n("sellAtTop",{initialValue:!0,valuePropName:"checked"})(l.default.createElement(d.default,{checkedChildren:"\u662f",unCheckedChildren:"\u5426"}))),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u5356\u51fa\u91d1\u989d"}),l.default.createElement(c.default,null,l.default.createElement(f.default,{span:12},n("sellNum",{initialValue:10})(l.default.createElement(u.default,{style:{width:"100%"},min:0,max:h,placeholder:"\u6b62\u76c8\u65f6\u5356\u51fa\u591a\u5c11"}))),l.default.createElement(f.default,{span:12},l.default.createElement(s.default.Item,{style:{marginBottom:"unset"}},n("sellUnit",{initialValue:"fundPercent"})(l.default.createElement(m.default,null,l.default.createElement(g,{value:"amount"},"\u5143"),l.default.createElement(g,{value:"fundPercent"},"% \u6301\u6709\u4efd\u989d"))))))),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u6307\u6570\u7f16\u53f7/\u540d\u79f0"}),n("referIndex",{initialValue:"1.000001"})(l.default.createElement(m.default,{showSearch:!0,placeholder:"\u8f93\u5165\u6307\u6570\u540d\u79f0\u6216\u7f16\u53f7",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.handleSearchIndex,notFoundContent:null},e.map((e,t)=>l.default.createElement(g,{key:e.id},e.name,"[",e.code,"]"))))),l.default.createElement(s.default.Item,Object.assign({},t,{label:"\u5356\u51fa MACD \u4e34\u754c\u70b9"}),n("sellMacdPoint",{})(l.default.createElement(u.default,{style:{width:"100%"},formatter:e=>"".concat(e,"%"),parser:e=>(e||"").replace("%",""),min:0,max:100,placeholder:"macd \u6b62\u76c8\u70b9"}))))}}t.StopProfitForm=v},"9dBp":function(e,t,a){"use strict";var n=a("p0pE");Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),o=r.__importStar(a("q1tI")),l=a("yP6+"),s=a("2dk7"),i=a("SLhE"),u=r.__importDefault(a("1Gbu")),d=r.__importDefault(a("cQSq")),m=31536e6;class c extends o.Component{constructor(){super(...arguments),this.ds=new d.default({state:{start:i.dateFormat(Date.now()-31536e6),end:i.dateFormat(Date.now())}}),this.sliderTimeChange=(e=>{var t=e.startText,a=e.endText;this.ds.setState("start",t),this.ds.setState("end",a)})}getDataList(){var e=this.props.data,t=0,a=0;return e.forEach(e=>{e.val=Number(e.val),e.macd=i.roundToFix(e.macd,2),e.diff=i.roundToFix(e.diff,2),e.dea=i.roundToFix(e.dea,2);var n=[Math.min(e.macd,e.diff,e.dea),Math.max(e.macd,e.diff,e.dea)],r=n[0],o=n[1];t=t<r?t:r,a=a>o?a:o}),{result:e,min:t,max:a}}render(){var e=this.props,t=e.textMap,a=e.commonProp;e.title;t=n({},t,{val:"\u6307\u6570"});var r=n({},a.chart,{height:500}),d=this.getDataList(),c=d.result,f=d.min,h=d.max;console.log("macd line",c);var p={min:f,max:h},g={date:{type:"timeCat"},macd:p,diff:p,dea:p,val:{alias:"\u6307\u6570\u503c"}},v=this.ds,y=i.dateFormat(new Date(c[c.length-1].date).getTime()-m);this.sliderTimeChange({startText:c[0].date>y?c[0].date:y,endText:c[c.length-1].date});var x=v.createView();return x.source(c).transform({type:"filter",callback:e=>{var t=e.date;return t<=v.state.end&&t>=v.state.start}}),o.default.createElement("div",null,o.default.createElement("h1",{className:"main-title"},"\u53c2\u8003\u6307\u6570\u66f2\u7ebf\u4e0e MACD \u8d8b\u52bf\u56fe"),o.default.createElement(l.Chart,Object.assign({data:x,scale:g},r),o.default.createElement(l.Axis,{name:"date"}),o.default.createElement(l.Axis,{name:"macd"}),o.default.createElement(l.Axis,{name:"diff",visible:!1}),o.default.createElement(l.Axis,{name:"dea",visible:!1}),o.default.createElement(l.Tooltip,null),o.default.createElement(l.Geom,{type:"line",position:"date*val",color:s.COLOR_NAME.purple,size:2}),o.default.createElement(l.Geom,{type:"interval",color:["macd",e=>{return e>0?s.COLOR_NAME.red:s.COLOR_NAME.green}],position:"date*macd"})),o.default.createElement("div",null,o.default.createElement(u.default,{padding:[20,40,20,40],width:"auto",height:26,start:v.state.start,end:v.state.end,xAxis:"date",yAxis:"macd",scales:{time:{type:"timeCat",nice:!1}},data:c,onChange:this.sliderTimeChange})))}}t.default=c},Cvqf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mrSG"),r=a("q1tI"),o=a("yP6+"),l=n.__importDefault(a("q1tI")),s=a("2dk7");class i extends r.Component{getTooltipFormat(e){return[e,t=>({name:this.props.textMap[e],value:t})]}render(){var e=this.props,t=e.data,a=e.textMap,n=e.commonProp,r=n.chart;return l.default.createElement("div",null,l.default.createElement("h1",{className:"main-title"},"\u7d2f\u8ba1\u6536\u76ca\u8d8b\u52bf\u56fe"),l.default.createElement(o.Chart,Object.assign({data:t},r),l.default.createElement(o.Legend,{itemFormatter:e=>{return a[e]}}),l.default.createElement(o.Axis,{name:"date"}),l.default.createElement(o.Axis,{name:"profitRate"}),l.default.createElement(o.Axis,{name:"profit"}),l.default.createElement(o.Tooltip,{crosshairs:{type:"y"}}),l.default.createElement(o.Geom,{type:"line",position:"date*accumulatedProfit",size:2,color:s.COLOR_PLATE_16[5],tooltip:this.getTooltipFormat("accumulatedProfit")})))}}t.RateChart=i},EDuE:function(e,t,a){e.exports={normal:"normal___HWRKS",welcome:"welcome___Hx9vE",list:"list___1QtXr",inline:"inline___3QxFT","inline-select":"inline-select___1bEMK",hint:"hint___jhb3q"}},I4l8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("SLhE"),r=864e5;class o{constructor(e){this.buyFeeRate=.0015,this.sellFeeRate=.005,this.data=[],this.dataMap={},Object.assign(this,e)}get annualizedRate(){var e=this.data.length;if(e>0){var t=this.data[0],a=this.data[e-1],o=new Date(a.date).getTime()-new Date(t.date).getTime(),l=o/r/365;return{fundGrowth:n.roundToFix(Math.pow(1+a.fundGrowthRate,1/l)-1,4),totalProfit:n.roundToFix(Math.pow(1+a.totalProfitRate,1/l)-1,4)}}return{fundGrowth:0,totalProfit:0}}shouldFixedInvest(e,t){var a=new Date(t);return"monthly"===e.period?a.getDate()===e.dateOrWeek:"weekly"===e.period&&a.getDay()===e.dateOrWeek}fixedInvest(e){var t=e.range,a=e.fixedInvestment;this.fixedConfig=e;var n=new Date(t[0]).getTime(),r=new Date(t[1]).getTime();if(n>r)throw new Error("range[1] should not less than range[0]");var o=n;while(o<=r)this.shouldFixedInvest(a,o)?this.buy(a.amount,o):this.buy(0,o),this.onEachDay(o),o+=864e5;return this}getSnapshotInstance(e){return this.dataMap[e]?this.dataMap[e]:new l({fundStrategy:this,date:e})}pushData(e){this.data.push(e),this.dataMap[e.date]||(this.dataMap[e.date]=e)}buy(e,t){var a=n.dateFormat(t),o=new Date(t).getTime();if(this.latestInvestment){var l=new Date(this.latestInvestment.date).getTime();l+=r;while(o>l){var s=this.getSnapshotInstance(l).buy(0);this.pushData(s),l+=r}}var i=this.getSnapshotInstance(a).buy(e);return this.pushData(i),this}sell(e,t){var a=n.dateFormat(t),o=new Date(t).getTime();if(this.latestInvestment){var l=new Date(this.latestInvestment.date).getTime();l+=r;while(o>l){var s=this.getSnapshotInstance(l).sell({amount:0});this.pushData(s),l+=r}}var i=this.getSnapshotInstance(a);return"all"===e?i.sell("all"):i.sell({amount:e}),this.pushData(i),this}getFundByDate(e,t){var a=this.fundJson.all;t&&t.origin&&(a=t.origin);var r=a[e];if(r)return r;var o=n.dateFormat(new Date(e).getTime()-864e5);return this.getFundByDate(o,t)}}t.InvestmentStrategy=o;class l{constructor(e){this.curBonus=[],this.dateBuyAmount=0,this.dateSellAmount=0,this.date=e.date?n.dateFormat(e.date):n.dateFormat(Date.now()),this.fundStrategy=e.fundStrategy;try{this.curFund=this.fundStrategy.getFundByDate(this.date)}catch(e){throw new RangeError("\u6240\u9009\u65f6\u95f4\u8d85\u51fa\u57fa\u91d1\u8fd0\u8425\u8303\u56f4")}if(this.fundStrategy.latestInvestment){var t=this.fundStrategy.latestInvestment;this.portion=t.portion,this.cost=t.cost,this.leftAmount=t.leftAmount,this.totalBuyAmount=t.totalBuyAmount,this.totalSellAmount=t.totalSellAmount,this.maxPrincipal=t.maxPrincipal,this.curBonus=this.getBonusBetween(this.fundStrategy.data[0].date,this.date)}else this.portion=0,this.cost=0,this.totalBuyAmount=0,this.totalSellAmount=0,this.leftAmount=this.fundStrategy.totalAmount,this.maxPrincipal=0;this.operate(),this.calcMaxAccumulatedProfit()}get costAmount(){return n.roundToFix(this.cost*this.portion,2)}get fundAmount(){return n.roundToFix(this.curFund.val*this.portion,2)}get profit(){return n.roundToFix((this.curFund.val-this.cost)*this.portion,2)}get profitRate(){return 0===this.costAmount?0:n.roundToFix(this.curFund.val/this.cost-1,4)}get totalProfitRate(){return 0===this.maxPrincipal?0:n.roundToFix(this.accumulatedProfit/this.maxPrincipal,4)}get totalAmount(){return n.roundToFix(this.leftAmount+this.fundAmount,2)}get accumulatedProfit(){return n.roundToFix(this.fundAmount-this.totalBuyAmount+this.totalSellAmount,2)}getBonusBetween(e,t){var a=new Date(e).getTime(),n=new Date(t).getTime(),r=this.fundStrategy.fundJson.bonus,o=Object.values(r).reduce((e,t)=>{var r=new Date(t.date).getTime();return r>=a&&r<=n&&e.push(t),e},[]);return o}get isBonus(){return Boolean(this.fundStrategy.fundJson.bonus[this.date])}get fundGrowthRate(){if(this.fundStrategy.data[0]){var e=this.curBonus,t=this.fundStrategy.data[0].curFund.val;if(0===e.length)return n.roundToFix((this.curFund.val-t)/t,4);var a=e.reduce((e,t)=>{return t.isBonusPortion?e*t.bonus:e*(Number(t.val)+Number(t.bonus))/t.val},this.curFund.val/t)-1;return n.roundToFix(a,4)}return 0}calcMaxAccumulatedProfit(){var e={date:this.date,amount:this.accumulatedProfit},t=this.fundStrategy.data[this.fundStrategy.data.length-1];t&&t.maxAccumulatedProfit?this.maxAccumulatedProfit=t.maxAccumulatedProfit.amount>e.amount?t.maxAccumulatedProfit:e:this.maxAccumulatedProfit=e}operate(){this.income(),this.isBonus&&(this.curFund.isBonusPortion?(this.cost=this.cost/this.curFund.bonus,this.portion=this.portion*this.curFund.bonus):(this.cost=this.cost*this.curFund.val/(Number(this.curFund.val)+Number(this.curFund.bonus)),this.portion=this.portion*(Number(this.curFund.val)+Number(this.curFund.bonus))/this.curFund.val)),this.fundStrategy.latestInvestment=this}calcMaxPrincipal(){this.maxPrincipal<this.costAmount&&(this.maxPrincipal=this.costAmount)}income(){var e=1;new Date(this.date).getDate()===e&&(this.leftAmount+=this.fundStrategy.salary)}fulfillBuyTxn(e){return e.val=e.val||this.curFund.val,isNaN(e.amount)||e.portion||(e.amount=n.roundToFix(e.amount/(1+this.fundStrategy.buyFeeRate),2),e.portion=n.roundToFix(e.amount/e.val,2)),e}fulfillSellTxn(e){var t;if(e.val=e.val||this.curFund.val,!e.amount&&0!==e.amount||e.portion){if(!isNaN(e.amount)||!e.portion)throw new Error("txn.portion \u548c txn.amount \u5fc5\u987b\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u503c");t=e.portion}else t=n.roundToFix(e.amount/e.val,2);return e.portion=t,e.amount=e.val*t*(1-this.fundStrategy.sellFeeRate),e}buy(e){if(this.isBonus)return this;if(e<=0)return this;this.totalBuyAmount+=e,this.dateBuyAmount+=e;var t=this.fulfillBuyTxn({amount:e}),a=this.costAmount;return this.portion=this.portion+t.portion,this.cost=n.roundToFix((a+e)/this.portion,4),this.leftAmount=n.roundToFix(this.leftAmount-e,2),this.calcMaxPrincipal(),this}sell(e){if(this.isBonus)return this;if("all"===e&&(e={portion:this.portion}),e&&(e.amount<=0||e.portion<=0))return this;var t=this.fulfillSellTxn(e);return this.portion-t.portion<0&&console.error("\u5356\u51fa\u4efd\u989d\u4e0d\u80fd\u6bd4\u6301\u6709\u4efd\u989d\u9ad8, \u8df3\u8fc7\u672c\u6b21\u5356\u51fa"),this.portion=this.portion-t.portion,this.leftAmount=n.roundToFix(this.leftAmount+t.amount,2),this.totalSellAmount=n.roundToFix(this.totalSellAmount+t.amount,2),this.dateSellAmount=n.roundToFix(this.dateSellAmount+t.amount,2),this}}t.InvestDateSnapshot=l},PmdP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mrSG"),r=a("q1tI"),o=a("yP6+"),l=n.__importDefault(a("q1tI")),s=a("2dk7");class i extends r.Component{getTooltipFormat(e){return[e,t=>({name:this.props.textMap[e],value:t})]}get scale(){var e=this.props.data.reduce((e,t)=>{return e.push(t.totalAmount,t.leftAmount,t.fundAmount),e},[]),t={min:Math.min(...e),max:Math.max(...e)};return{totalAmount:t,leftAmount:t,fundAmount:t}}render(){var e=this.props,t=e.data,a=e.textMap,n=e.commonProp,r=n.chart,i=this.scale;return l.default.createElement("div",null,l.default.createElement("h1",{className:"main-title"},"\u8d44\u4ea7\u589e\u957f\u8d8b\u52bf\u56fe"),l.default.createElement(o.Chart,Object.assign({data:t,scale:i},r),l.default.createElement(o.Legend,{itemFormatter:e=>{return a[e]}}),l.default.createElement(o.Axis,{name:"date"}),l.default.createElement(o.Axis,{name:"totalAmount"}),l.default.createElement(o.Axis,{name:"leftAmount",visible:!1}),l.default.createElement(o.Axis,{name:"fundAmount",visible:!1}),l.default.createElement(o.Tooltip,{crosshairs:{type:"y"}}),l.default.createElement(o.Geom,{type:"line",position:"date*totalAmount",size:2,color:s.COLOR_PLATE_8[0],tooltip:this.getTooltipFormat("totalAmount")}),l.default.createElement(o.Geom,{type:"line",position:"date*leftAmount",size:2,color:s.COLOR_PLATE_8[1],tooltip:this.getTooltipFormat("leftAmount")}),l.default.createElement(o.Geom,{type:"line",position:"date*fundAmount",size:2,color:s.COLOR_PLATE_8[7],tooltip:this.getTooltipFormat("fundAmount")})))}}t.TotalAmountChart=i},QeBL:function(e,t,a){"use strict";var n=a("d6i3"),r=a("qIgq"),o=a("1l/V");Object.defineProperty(t,"__esModule",{value:!0});var l=a("mrSG"),s=l.__importStar(a("q1tI")),i=l.__importDefault(a("EDuE")),u=a("sn++"),d=a("hQqI");a("TpwP");var m=a("7CHm"),c=a("I4l8"),f=l.__importDefault(a("TeRw")),h=l.__importDefault(a("wd/R")),p=a("SLhE");class g extends s.Component{constructor(){var e;super(...arguments),e=this,this.state={fundData:[]},this.getFundData=function(){var t=o(n.mark(function t(a){var o,l,s,i,u,d;return n.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("\u57fa\u91d1\u8868\u5355\u53c2\u6570",a),a.referIndex=a.referIndex||m.IndexFund.ShangZheng,t.next=4,Promise.all([m.getFundData(a.fundId,a.dateRange),m.getIndexFundData({code:m.IndexFund.ShangZheng,range:a.dateRange}),a.referIndex?m.getIndexFundData({code:a.referIndex,range:a.dateRange}):Promise.resolve(null)]);case 4:return o=t.sent,l=r(o,3),s=l[0],i=l[1],u=l[2],m.txnByMacd(Object.values(u),a.sellMacdPoint/100,a.buyMacdPoint/100),d=new Date(Object.keys(s.all).pop()),d.getTime()>new Date(a.dateRange[0]).getTime()&&(a.dateRange[0]=h.default(d)),t.prev=12,t.abrupt("return",e.createInvestStragegy(s,a,{szData:i,indexData:u}));case 16:throw t.prev=16,t.t0=t["catch"](12),f.default.error({message:"\u57fa\u91d1\u521b\u5efa\u9519\u8bef",description:t.t0.message}),new Error(t.t0);case 20:case"end":return t.stop()}},t,null,[[12,16]])}));return function(e){return t.apply(this,arguments)}}()}createInvestStragegy(e,t,a){var n=new c.InvestmentStrategy({totalAmount:t.totalAmount+t.purchasedFundAmount,salary:t.salary,shangZhengData:a.szData,indexData:a.indexData,stop:{rate:.05,minAmount:5e4},tInvest:{rate:.05,amount:1e3},fundJson:e,onEachDay(e){var n=p.dateFormat(e),r=this.latestInvestment,o=this.getFundByDate(n,{origin:a.szData}),l=p.roundToFix(r.fundAmount/r.totalAmount,2),s=a.indexData[n]||{};if(l>t.fundPosition/100&&o.val>t.shCompositeIndex&&(!t.sellAtTop||r.maxAccumulatedProfit.date===r.date)&&(!t.sellMacdPoint||"sell"===s.txnType)&&r.profitRate>(t.profitRate/100||-100)){var i="amount"===t.sellUnit?t.sellNum:(t.sellNum/100*r.fundAmount).toFixed(2);this.sell(Number(i),n)}if(t.buyMacdPoint&&"buy"===s.txnType){var u=t.buyAmountPercent<=100?Math.round(r.leftAmount*t.buyAmountPercent/100):t.buyAmountPercent;this.buy(u,n)}}});return n.buy(t.purchasedFundAmount,t.dateRange[0]).fixedInvest({fixedInvestment:{period:t.period[0],amount:t.fixedAmount,dateOrWeek:t.period[1]},range:[p.dateFormat(t.dateRange[0]),p.dateFormat(t.dateRange[1])]}),console.log("investment",n),this.setState({fundData:n.data}),n}render(){return s.default.createElement("div",{className:i.default.normal},s.default.createElement(d.SearchForm,{onSearch:this.getFundData}),0===this.state.fundData.length?"":s.default.createElement(u.FundChart,{data:this.state.fundData}))}}t.default=g},RnhZ:function(e,t,a){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="RnhZ"},SLhE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateFormat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd",a=new Date(e);if(!a.getFullYear())return console.log(e,a),e;var n=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],r=[a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()],o=r[0],l=r[1],s=r[2],i=r[3],u=r[4],d=r[5],m={yyyy:o,eM:n[l],MM:(l+1+"").padStart(2,"0"),M:l+1,dd:(s+"").padStart(2,"0"),d:s,HH:(i+"").padStart(2,"0"),H:i,hh:(i%12+"").padStart(2,"0"),h:i%12,mer:i>12?"pm":"am",mm:(u+"").padStart(2,"0"),m:u,ss:(d+"").padStart(2,"0"),s:d},c=/eM|mer|yyyy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s/g;return t.replace(c,e=>m[e])},t.roundToFix=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=Math.pow(10,t);return Number((Math.round(Number(e)*a)/a).toFixed(t))},t.disabledFuture=(e=>{var t=new Date(e).getTime(),a=Date.now();return t>a}),t.formatPercentVal=(e=>{return t.roundToFix(100*e)+"%"}),window["getJSONP"]=((e,t,a)=>{var n="cb"+window["getJSONP"].counter++,r="getJSONP."+n;-1==e.indexOf("?")?(e+="?callback="+r,e+="?cb="+r):(e+="&callback="+r,e+="&cb="+r);var o=document.createElement("script");o.referrerPolicy="no-referrer",window["getJSONP"][n]=function(e){try{t(e)}finally{delete window["getJSONP"][n],o.parentNode.removeChild(o)}},o.src=e,a&&a.onload&&(o.onload=(()=>{a.onload()})),document.body.appendChild(o)}),window["getJSONP"].counter=0},YTim:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mrSG"),r=n.__importStar(a("q1tI")),o=n.__importDefault(a("5rEg")),l=n.__importDefault(a("kLXV")),s=n.__importDefault(a("mr32")),i=n.__importDefault(a("diRs")),u=n.__importDefault(a("2/Rp")),d=a("SLhE"),m=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"],c="saved-fund-form",f=localStorage.getItem(c)||"{}";if("{}"===f){var h=d.dateFormat(Date.now(),"yyyy-MM-dd"),p=d.dateFormat(Date.now()-94608e6,"yyyy-MM-dd");f=JSON.stringify({"\u5b9a\u6295\u767d\u9152\u4e0d\u6b62\u76c8":{fundId:"161725",dateRange:["".concat(p,"T00:00:00.000Z"),"".concat(h,"T16:00:00.000Z")],totalAmount:1e4,salary:1e4,purchasedFundAmount:0,fixedAmount:2e3,period:["weekly",4],shCompositeIndex:3e3,fundPosition:100,profitRate:5,sellAtTop:!1,sellNum:10,sellUnit:"fundPercent",referIndex:"1.000001",buyAmountPercent:20},"\u5b9a\u6295\u767d\u9152\u6b62\u76c8":{fundId:"161725",dateRange:["".concat(p,"T00:00:00.000Z"),"".concat(h,"T16:00:00.000Z")],totalAmount:1e4,salary:1e4,purchasedFundAmount:0,fixedAmount:2e3,period:["weekly",4],shCompositeIndex:3e3,fundPosition:70,profitRate:10,sellAtTop:!0,sellNum:10,sellUnit:"fundPercent",referIndex:"1.000001",buyAmountPercent:20}})}t.allSavedCondition=JSON.parse(f);class g extends r.Component{constructor(){super(...arguments),this.state={allSavedCondition:t.allSavedCondition,selectedName:""},this.saveSearchForm=(()=>{var e=this.state.selectedName;this.props.form.validateFields((t,a)=>{if(!t){var n=e;l.default.confirm({title:"\u8bf7\u7ed9\u5f53\u524d\u641c\u7d22\u6761\u4ef6\u547d\u540d",content:r.default.createElement(o.default,{defaultValue:e,placeholder:"\u5982\u540d\u79f0\u91cd\u590d\uff0c\u5c06\u4f1a\u8986\u76d6\u539f\u6709\u641c\u7d22\u6761\u4ef6",onChange:e=>{n=e.target.value}}),onOk:()=>{this.setState({selectedName:n}),this.state.allSavedCondition[n]=a,this.saveStorage(),this.props.onSave&&this.props.onSave(a)}})}})})}deleteCondition(e,t){e.preventDefault(),e.stopPropagation(),console.log("tag name",t),delete this.state.allSavedCondition[t],this.saveStorage()}saveStorage(){localStorage.setItem(c,JSON.stringify(this.state.allSavedCondition)),this.setState({allSavedCondition:this.state.allSavedCondition})}handleSelectedTag(e,t){this.setState({selectedName:e}),this.props.onSelected(e,t)}content(){var e=this.state.allSavedCondition;return r.default.createElement("div",{style:{width:500}},Object.keys(e).map((t,a)=>{return r.default.createElement(s.default,{closable:!0,key:a,style:{marginBottom:10,cursor:"pointer"},color:m[a%m.length],onClose:e=>this.deleteCondition(e,t),onClick:()=>this.handleSelectedTag(t,e[t])},t)}))}render(){return r.default.createElement(r.Fragment,null,r.default.createElement(u.default,{type:"default",onClick:this.saveSearchForm,style:{marginRight:10}},"\u4fdd\u5b58"),r.default.createElement(i.default,{trigger:"click",placement:"bottomRight",content:this.content(),title:"\u5df2\u4fdd\u5b58\u7684\u57fa\u91d1\u7b56\u7565"},r.default.createElement(u.default,{type:"primary"},"\u6211\u7684\u4fdd\u5b58\u9879")))}}t.SavedSearchCondition=g},hQqI:function(e,t,a){"use strict";var n=a("qIgq"),r=a("p0pE"),o=a("d6i3"),l=a("1l/V");Object.defineProperty(t,"__esModule",{value:!0});var s=a("mrSG"),i=s.__importStar(a("q1tI")),u=s.__importDefault(a("Vl3Y")),d=s.__importDefault(a("+eQT")),m=s.__importDefault(a("2/Rp")),c=s.__importDefault(a("bx4M")),f=s.__importDefault(a("2fM7")),h=s.__importDefault(a("fyUT")),p=s.__importDefault(a("DFOY")),g=s.__importDefault(a("PArb")),v=s.__importDefault(a("BMrR")),y=s.__importDefault(a("kPKH")),x=s.__importDefault(a("wd/R")),E=a("SLhE"),b=a("7CHm"),D=s.__importDefault(a("EDuE")),F=a("7R38"),A=a("wgSR"),j=a("YTim"),w=s.__importDefault(a("DzJC")),S=d.default,C=(S.MonthPicker,S.RangePicker),_=f.default.Option;class P extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={searchFundData:[]},this.weekOpt=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94"].map((e,t)=>{return{value:t+1,label:"\u5468"+e}}),this.monthOpt=Array(28).fill("").map((e,t)=>{return{value:t+1,label:"".concat(t+1,"\u53f7")}}),this.handleSearch=w.default(function(){var t=l(o.mark(function t(a){var n;return o.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,b.getFundInfo(a);case 3:n=t.sent,e.setState({searchFundData:n}),t.next=8;break;case 7:e.setState({searchFundData:[]});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),1e3),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||this.props.onSearch(t)})}),this.reset=(()=>{this.props.form.resetFields()}),this.disabledDate=(e=>{var t=new Date(e).getTime(),a=Date.now();return t>a}),this.updateSearchForm=((e,t)=>{this.handleSearch(t.fundId),this.props.form.setFieldsValue(r({},t,{dateRange:t.dateRange.map(e=>x.default(e))})),this.props.onSearch(t)})}get periodOpts(){return[{value:"weekly",label:"\u6bcf\u5468",children:this.weekOpt},{value:"monthly",label:"\u6bcf\u6708",children:this.monthOpt}]}render(){var e=this.props.form.getFieldDecorator,t=this.state.searchFundData,a=E.dateFormat(new Date).split("-").map(Number),r=n(a,3),o=r[0],l=r[1],s=r[2];l=Number(l)-1;var d={style:{width:500},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},b={rules:[{type:"array",required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4"}],initialValue:[x.default([Number(o)-1,l,s]),x.default([o,l,s])]},w={span:24,xl:12,xxl:8},S=this.props.form.getFieldsValue();return console.log("formVa",S),i.default.createElement(c.default,{title:"\u57fa\u91d1\u9009\u9879",extra:i.default.createElement(j.SavedSearchCondition,{form:this.props.form,onSelected:this.updateSearchForm}),style:{textAlign:"initial",margin:"20px 0"}},i.default.createElement(u.default,{onSubmit:this.handleSubmit},i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u57fa\u91d1\u7f16\u53f7"}),e("fundId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u57fa\u91d1\u7f16\u53f7"}]})(i.default.createElement(f.default,{showSearch:!0,placeholder:"\u8f93\u5165\u57fa\u91d1\u540d\u79f0\u6216\u57fa\u91d1\u7f16\u53f7",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.handleSearch,notFoundContent:null},t.map(e=>i.default.createElement(_,{key:e.code},e.name,"[",e.code,"]"))))),i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u65f6\u95f4\u8303\u56f4"}),e("dateRange",b)(i.default.createElement(C,{placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],ranges:{"\u6700\u8fd1\u4e00\u5e74":[x.default([Number(o)-1,l,s]),x.default([o,l,s])],"\u6700\u8fd1\u4e24\u5e74":[x.default([Number(o)-2,l,s]),x.default([o,l,s])],"\u6700\u8fd1\u4e09\u5e74":[x.default([Number(o)-3,l,s]),x.default([o,l,s])],"\u6700\u8fd1\u4e94\u5e74":[x.default([Number(o)-5,l,s]),x.default([o,l,s])]},disabledDate:this.disabledDate}))),i.default.createElement(v.default,null,i.default.createElement(y.default,Object.assign({},w),i.default.createElement(g.default,{orientation:"left"},"\u6295\u8d44\u7b56\u7565 ",i.default.createElement("span",{className:D.default.hint},"\u9ed8\u8ba4[\u5206\u7ea2\u65b9\u5f0f\uff1a\u7ea2\u5229\u590d\u6295][\u4e70\u5165\u8d39\u7387:0.15%][\u5356\u51fa\u8d39\u73870.5%]")),i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u521d\u59cb\u672c\u91d1"}),e("totalAmount",{initialValue:1e4,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u672c\u91d1"}]})(i.default.createElement(h.default,{style:{width:"100%"},min:0}))),i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u6708\u5de5\u8d44[\u6bcf\u6708\u589e\u91cf\u8d44\u91d1]"}),e("salary",{initialValue:1e4,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6708\u5de5\u8d44"}]})(i.default.createElement(h.default,{style:{width:"100%"},min:0}))),i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u521d\u59cb\u6301\u6709\u57fa\u91d1\u91d1\u989d"}),e("purchasedFundAmount",{initialValue:0,rules:[{required:!0,message:"\u8f93\u5165\u6301\u6709\u57fa\u91d1\u91d1\u989d, \u4ece0\u5f00\u59cb\u5b9a\u6295\u5219\u586b0"}]})(i.default.createElement(h.default,{style:{width:"100%"},min:0,placeholder:"\u6295\u8d44\u5f00\u59cb\u65f6\u6301\u6709\u7684\u57fa\u91d1\u91d1\u989d"}))),i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u5b9a\u6295\u91d1\u989d"}),e("fixedAmount",{rules:[{required:!0,message:"\u8f93\u5165\u5b9a\u6295\u91d1\u989d"}],initialValue:1e3})(i.default.createElement(h.default,{style:{width:"100%"},min:0}))),i.default.createElement(u.default.Item,Object.assign({},d,{label:"\u5b9a\u6295\u5468\u671f"}),e("period",{initialValue:["monthly",1],rules:[{required:!0}]})(i.default.createElement(p.default,{options:this.periodOpts,placeholder:"\u9009\u62e9\u5b9a\u6295\u5468\u671f"}))),i.default.createElement(u.default.Item,{wrapperCol:{sm:{span:16,offset:8}}},i.default.createElement(m.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),i.default.createElement(m.default,{style:{marginLeft:20},onClick:this.reset},"\u91cd\u7f6e"))),i.default.createElement(y.default,Object.assign({},w),i.default.createElement(F.StopProfitForm,{form:this.props.form})),i.default.createElement(y.default,Object.assign({},w),i.default.createElement(A.BuyStragegyForm,{form:this.props.form})))),S.dateRange?i.default.createElement("div",null,i.default.createElement("p",null," \u5b9a\u6295\u63cf\u8ff0\uff1a\u4ece ",S.dateRange[0].format("YYYY-MM-DD")," ~ ",S.dateRange[1].format("YYYY-MM-DD")," \u65f6\u95f4\u5185 \u6295\u8d44\u57fa\u91d1[",S.fundId,"]\uff0c\u521d\u59cb\u6301\u6709\u57fa\u91d1 ",S.purchasedFundAmount," \u5143\uff0c\u6301\u6709\u53ef\u7528\u6295\u8d44\u8d44\u91d1 ",S.totalAmount," \u5143\uff0c\u6bcf\u6708\u589e\u52a0\u6295\u8d44\u8d44\u91d1 ",S.salary,"\u5143\u3010\u5de5\u8d44\u6536\u5165\u3011\uff1b\u6bcf ","weekly"===S.period[0]?"\u5468":"\u6708"," ",S.period[1]," ","weekly"===S.period[0]?"":"\u53f7"," \u5b9a\u6295 ",S.fixedAmount," \u5143\u3002"),i.default.createElement("p",null,"\u6b62\u76c8\u63cf\u8ff0\uff1a\u5f53\u4e0a\u8bc1\u6307\u6570\u5927\u4e8e ",S.shCompositeIndex," \u70b9\uff0c\u4e14\u6301\u6709\u4ed3\u4f4d\u5927\u4e8e ",S.fundPosition,"%\uff0c\u4e14\u5f53\u524d\u6301\u6709\u6536\u76ca\u7387\u5927\u4e8e ",S.profitRate,"%\uff0c",S.sellAtTop?"\u4e14\u7d2f\u8ba1\u76c8\u5229\u65b0\u9ad8\uff0c":"",null!==S.sellMacdPoint&&S.sellMacdPoint>=0?"\u4e14\u53c2\u8003\u6307\u6570".concat(S.referIndex,"\u7684MACD\u7ea2\u67f1\u63a5\u8fd1 ").concat(S.sellMacdPoint,"% \u4e34\u754c\u4f4d\u7f6e\uff0c"):"","\u5219\u5356\u51fa ",S.sellNum," ","amount"===S.sellUnit?"\u5143":"% \u7684\u6301\u6709\u4efd\u989d"," "),i.default.createElement("p",null,"\u8865\u4ed3\u63cf\u8ff0\uff1a",null!==S.buyMacdPoint&&S.buyMacdPoint>=0?"\u53c2\u8003\u6307\u6570".concat(S.referIndex,"\u7684MACD\u7eff\u67f1\u63a5\u8fd1 ").concat(S.buyMacdPoint,"% \u4e34\u754c\u4f4d\u7f6e\uff0c\u4e70\u5165\u5269\u4f59\u6d41\u52a8\u8d44\u91d1\u7684 ").concat(S.buyAmountPercent,"%"):"")):null)}}t.InnerSearchForm=P,t.SearchForm=u.default.create({name:"fund-search"})(P)},ka5M:function(e,t,a){"use strict";var n=a("p0pE"),r=a("Y/ft");Object.defineProperty(t,"__esModule",{value:!0});var o=a("mrSG"),l=o.__importStar(a("q1tI")),s=o.__importDefault(a("1Gbu")),i=o.__importDefault(a("cQSq")),u=a("SLhE");class d extends l.Component{constructor(){super(...arguments),this.ds=new i.default({state:{start:u.dateFormat(Date.now()-31536e6),end:u.dateFormat(Date.now())}}),this.sliderTimeChange=(e=>{var t=e.startText,a=e.endText;this.ds.setState("start",t),this.ds.setState("end",a)})}render(){var e=this.props,t=(e.children,r(e,["children"])),a=t.data,o=t.y;if(!a||!a[0])return null;var i=this.ds;this.sliderTimeChange({startText:a[0].date,endText:a[a.length-1].date});var u=i.createView();u.source(a).transform({type:"filter",callback:e=>{var t=e.date;return t<=i.state.end&&t>=i.state.start}}),a=u;var d=l.default.Children.map(this.props.children,e=>l.default.cloneElement(e,n({},t,{data:a})));return l.default.createElement("div",null,d,l.default.createElement("div",null,l.default.createElement(s.default,{padding:[20,40,20,40],width:"auto",height:26,start:i.state.start,end:i.state.end,xAxis:"date",yAxis:o,scales:{time:{type:"timeCat"}},data:a,onChange:this.sliderTimeChange})))}}t.SliderChart=d},"sn++":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mrSG"),r=n.__importStar(a("q1tI")),o=a("PmdP"),l=a("+Lt0"),s=a("Cvqf"),i=a("6N5B"),u=a("SLhE"),d=n.__importDefault(a("9dBp")),m=a("ka5M");t.keyTextMap={totalAmount:"\u603b\u8d44\u4ea7",leftAmount:"\u5269\u4f59\u53ef\u7528\u8d44\u91d1",profitRate:"\u6301\u6709\u6536\u76ca\u7387",profit:"\u6301\u6709\u6536\u76ca",fundAmount:"\u57fa\u91d1\u6301\u6709\u91d1\u989d",fundVal:"\u57fa\u91d1\u51c0\u503c",fundGrowthRate:"\u57fa\u91d1\u6da8\u5e45",dateBuyAmount:"\u4e70\u5165\u91d1\u989d",dateSellAmount:"\u5356\u51fa\u91d1\u989d",accumulatedProfit:"\u7d2f\u8ba1\u76c8\u4e8f",maxPrincipal:"\u7d2f\u8ba1\u672c\u91d1",totalProfitRate:"\u7d2f\u8ba1\u6536\u76ca\u7387",position:"\u6301\u6709\u4ed3\u4f4d",buy:"\u4e70\u5165",fixedBuy:"\u5b9a\u6295",sell:"\u5356\u51fa",avgPos:"\u5e73\u5747\u4ed3\u4f4d",maxPos:"\u6700\u5927\u4ed3\u4f4d",profitPerInvest:"\u6536\u76ca\u4ed3\u4f4d\u6bd4"};class c extends r.Component{constructor(){super(...arguments),this.commonProp={chart:{forceFit:!0,height:450,padding:[20,80,100,80]}}}render(){var e=this.props.data[0].fundStrategy.fixedConfig.fixedInvestment.amount,a=this.props.data.map(t=>{var a;return t.dateBuyAmount>0&&(a=t.dateBuyAmount===e?"fixedBuy":"buy"),t.dateSellAmount>0&&(a="sell"),{origin:t,totalAmount:t.totalAmount,leftAmount:t.leftAmount,date:t.date,profit:t.profit,profitRate:t.profitRate,fundAmount:t.fundAmount,fundVal:Number(t.curFund.val),fundGrowthRate:t.fundGrowthRate,dateBuyAmount:t.dateBuyAmount,dateSellAmount:t.dateSellAmount,txnType:a,accumulatedProfit:t.accumulatedProfit,maxPrincipal:t.maxPrincipal,totalProfitRate:t.totalProfitRate,position:u.roundToFix(t.fundAmount/t.totalAmount,4)}}),n=a;if(!n||!n[0])return null;console.log("\u6e90\u6570\u636e",n);var c=[n[0].origin.date,n[n.length-1].origin.date],f=c[0],h=c[1],p=Object.values(n[0].origin.fundStrategy.indexData).filter(e=>{var t=new Date(e.date).getTime();return t>=new Date(f).getTime()&&t<=new Date(h).getTime()}),g=0,v=u.roundToFix(n.reduce((e,t)=>{var a=t.position;return g=a>g?a:g,e+a},0)/n.length*100,2);return r.default.createElement("div",null,r.default.createElement(l.FundValChart,{data:n,textMap:t.keyTextMap,commonProp:this.commonProp}),r.default.createElement(d.default,{data:p,textMap:t.keyTextMap,commonProp:this.commonProp}),r.default.createElement(s.RateChart,{data:n,textMap:t.keyTextMap,commonProp:this.commonProp}),r.default.createElement(o.TotalAmountChart,{data:n,textMap:t.keyTextMap,commonProp:this.commonProp}),r.default.createElement(i.CommonFundLine,{y:"totalAmount",data:n,textMap:t.keyTextMap,commonProp:this.commonProp}),r.default.createElement(m.SliderChart,{y:"position",data:n.map(e=>{return{position:e.position,date:e.date}})},r.default.createElement(i.CommonFundLine,{y:"position",subTitle:"\u5e73\u5747\u4ed3\u4f4d\uff1a".concat(v,"%; \u6700\u5927\u4ed3\u4f4d\uff1a").concat(100*g,"%"),data:n,textMap:t.keyTextMap,commonProp:this.commonProp})))}}t.FundChart=c},wgSR:function(e,t,a){"use strict";var n=a("d6i3"),r=a("1l/V");Object.defineProperty(t,"__esModule",{value:!0});var o=a("mrSG"),l=o.__importStar(a("q1tI")),s=o.__importDefault(a("qu0K")),i=o.__importDefault(a("2fM7")),u=o.__importDefault(a("fyUT")),d=o.__importDefault(a("PArb")),m=a("7CHm"),c=o.__importDefault(a("DzJC")),f=i.default.Option,h={style:{width:500},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};class p extends l.Component{constructor(){var e;super(...arguments),e=this,this.state={searchIndexData:[]},this.handleSearchIndex=c.default(function(){var t=r(n.mark(function t(a){var r;return n.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,m.searchIndex(a);case 3:r=t.sent,e.setState({searchIndexData:r}),t.next=8;break;case 7:e.setState({searchIndexData:[]});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),1e3)}render(){var e=this.state.searchIndexData,t=this.props.form,a=t.getFieldDecorator;t.getFieldsValue;return l.default.createElement("section",null,l.default.createElement(d.default,{orientation:"left"},"\u8865\u4ed3\u7b56\u7565 "),l.default.createElement(s.default.Item,Object.assign({},h,{label:"\u53c2\u8003\u6307\u6570"}),a("referIndex")(l.default.createElement(i.default,{showSearch:!0,placeholder:"\u8f93\u5165\u6307\u6570\u540d\u79f0\u6216\u7f16\u53f7",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.handleSearchIndex,notFoundContent:null},e.map((e,t)=>l.default.createElement(f,{key:e.id},e.name,"[",e.code,"]"))))),l.default.createElement(s.default.Item,Object.assign({},h,{label:"\u4e70\u5165 MACD \u4e34\u754c\u70b9"}),a("buyMacdPoint",{})(l.default.createElement(u.default,{style:{width:"100%"},formatter:e=>"".concat(e,"%"),parser:e=>(e||"").replace("%",""),min:0,max:100,placeholder:"macd \u8865\u4ed3\u70b9"}))),l.default.createElement(s.default.Item,Object.assign({},h,{label:"\u8865\u4ed3\u91d1\u989d"}),l.default.createElement("div",null,l.default.createElement("span",null,"  \u5269\u4f59\u6d41\u52a8\u8d44\u91d1\u7684 "),a("buyAmountPercent",{initialValue:20})(l.default.createElement(u.default,{size:"small",min:0,formatter:e=>Number(e)>100?"".concat(e,"\u5143"):"".concat(e,"%"),parser:e=>(e||"").replace(/%|\u5143/,""),placeholder:"\u8865\u4ed3\u4e70\u5165\u767e\u5206\u6bd4"}))," ")))}}t.BuyStragegyForm=p}}]);